
<link rel="import" href="../../libs/paper-dialog/paper-dialog.html">
<link rel="import" href="../../libs/paper-dialog/paper-dialog-transition.html">
<link rel="import" href="../../libs/paper-button/paper-button.html">
<link rel="import" href="../../libs/core-input/core-input.html">
<link rel="import" href="../../libs/paper-input/paper-input.html">
<link rel="import" href="../../libs/paper-input/paper-input-decorator.html">
<link rel="import" href="../../libs/core-icons/social-icons.html">
<link rel="import" href="../../libs/core-item/core-item.html">
<link rel="import" href="../../libs/core-a11y-keys/core-a11y-keys.html">
<link rel="import" href="../main-screen/routes.html">
<link rel="import" href="../badge-element/badge-element.html">
<link rel="import" href="../badge-button/badge-button.html">
<link rel="import" href="../main-screen/routes.html">

<polymer-element name="login-box">
	<template id="app">
		<link rel="stylesheet" type="text/css" href="style.css">
		<paper-button   id="loginbutton" on-click="{{loginAction}}" >login</paper-button>
		<!-- <paper-fab style="display:none;" id="profilebutton" mini icon="social:person" ></paper-fab>	 -->
		<badge-button id="profilebutton" on-click="{{openBadge}}" mini icon="social:person" title="User profile"></badge-button>
		
		<paper-dialog id="login" backdrop="" autoclosedisabled="false" layered="true" role="dialog" layout="" vertical="">
			<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
			<link rel="stylesheet" type="text/css" href="style.css">
			<h3>LOGIN</h3>
			<div id="loginmessage"></div>
			<div id="wronglogin"></div>
			<paper-input-decorator label="Username">
				<input id="username" is="core-input" autofocus/>
			</paper-input-decorator>
			<paper-input-decorator label="Password">
			   	<input id="password" is="core-input" type="password"/>
			</paper-input-decorator>

			<paper-button on-click="{{login}}">LOGIN</paper-button>
			<core-a11y-keys keys="enter" on-keys-pressed="{{login}}"></core-a11y-keys>
			<div style="color:blue;margin-top:20px; text-decorator:underline; width:100%; text-align:center;">
				<!-- <a href="" >Forgot your password?</a> -->
			</div>
			<template if="{{signup}}">
			    <hr></hr>
				<a href="{{urlFor('selfregistration')}}">
					<paper-button class="register" on-click="{{closeDialog}}">Sign Up</paper-button>
				</a>
			</template>	

		</paper-dialog>

		
        <badge-element id="userbadge" on-core-overlay-open-completed="{{showTriangle}}" on-core-overlay-close-completed="{{hideTriangle}}" position="right">
       		<link rel="stylesheet" type="text/css" href="badge-element.css">
            <div class="row">
	            <h4>{{user.username}}</h4>
	            <h5>{{user.email}}</h5>
	            <div id="roles">
	            		<div>Allowed functions</div>
	            		<core-icon icon="search" role="img" title="Search" style="display:none;"  id="role_SEARCH"></core-icon>
	            		<core-icon icon="file-download" role="img" title="Download" style="display:none;" id="role_DOWNLOAD"></core-icon>
	            		<core-icon icon="file-upload" role="img" title="Upload" style="display:none;"  id="role_UPLOAD"></core-icon>
	            		<core-icon icon="supervisor-account" role="img" title="User Manager" style="display:none;"  id="role_USER_MANAGER"></core-icon>
	            		<core-icon icon="folder" role="img" title="Archive Manager" style="display:none;"  id="role_ARCHIVE_MANAGER"></core-icon>
	            		<core-icon icon="folder" role="img" title="Data Manager" style="display:none;"  id="role_DATA_MANAGER"></core-icon>
	            		<core-icon icon="dns" role="img" title="System Manager" style="display:none;"  id="role_SYSTEM_MANAGER"></core-icon>
	            		<core-icon icon="assessment" role="img" title="Statistics" style="display:none;"  id="role_STATISTICS"></core-icon>

	            </div>
            </div>
            <hr/>
            <div class="row">
	            <a href="{{urlFor('cart')}}" >
                    <core-item label="Cart" title="Cart" route="cart" icon="shopping-cart" affirmative on-click="{{loadCart}}"></core-item>
                </a>
	        </div>
	        <div class="row">
	            <a href="{{urlFor('savedsearches')}}" >
                    <core-item label="Saved Searches" title="Saved Searches" route="savedsearches" icon="save" affirmative on-click="{{loadSearches}}"></core-item>
                </a>
	        </div>
	        <div class="row badge-footer">
	            <a href="{{urlFor('profile')}}"><paper-button class="badge-button" affirmative on-click="{{editProfile}}">Edit Profile</paper-button></a>
	            <paper-button class="badge-button" affirmative on-click="{{logout}}">LOGOUT</paper-button>
	        </div>
        </badge-element>


  	</template>
  <script src="script.js"></script>
</polymer-element>